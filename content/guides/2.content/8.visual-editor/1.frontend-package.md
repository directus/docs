---
title: Frontend Package
description: A library that allows your website to communicate with your Directus project and enables Visual Editing.
---

Developers must make use of the Visual Editing [Frontend package](https://www.npmjs.com/package/@directus/visual-editing) to ensure communication between your website's HTML elements and the Directus Visual Editor Module. This is done through data attributes and helper functions built into the package and imported into your website.

```bash
npm install @directus/visual-editing
```

## API

The Visual Editing Package consists of a few imported methods, only one of which is required to make the basic functionality work.

| Method             | Description                                                                          | Options |
| ------------------ | -------------------------------------------------------------------------------------| ------- |
| `apply()`          | Connects each `data-directus` attribute to your Directus instance. This is required. | `directusUrl`, `elements`, `customClass`, `onSaved` |
| `setAttr()`        | Helper function for dynamically generating `data-directus` attributes.               | `collection`, `item`, `fields`, `mode`              |
| `remove()`         | Removes all elements.                                                                | |
| `disable()`        | Temporarily disable all elements. Re-enable those elements with returned `enable()` function `const { enable } = disable();`. | |


## Configuring Attributes

The association between individual website elements and Directus collections and items is made through `data-directus` attributes rendered within the HTML of your website.

The preferred method for generating your `data-directus` attributes is by using the included `setAttr` helper method in order to render these attributes dynamically.

For example when using `setAttr` in Vue:

```vue
<template>
    <h1 :data-directus="setAttr({ collection: 'posts', item: post.id, fields: 'title',
    mode: 'popover' })">
        {{ post.title }}
    </h1>
</template>
```

The generated attribute will be:

```html
<h1 data-directus="collection:posts;item:12;fields:title;mode:popover">
  I Love Visual Editing
</h1>
```

::callout{icon="material-symbols:info-outline"}
The `fields` prop in the `setAttr` function can also accept an array of strings, which will render a comma separated list like: `data-directus="collection:posts;item:12;fields:title,subtitle,slug"`
::

| Option | Type | Description |
| ------ | ---- | ----------- |
| `collection`  | `string`                           | Name of the relevant collection. This is required. |
| `item`        | `string`, `number`                 | Primary key of the item. This is required. |
| `fields`      | `string`, `string[]`               | The specific fields to show when editing. Optional, otherwise all fields will be shown. |
| `mode`        | `'drawer'`, `'modal'`, `'popover'` | Determines how the edit field(s) should be rendered. Optional, but defaults to `'drawer'` |

::callout{icon="material-symbols:warning-rounded" color="amber"}
**Be careful with sensitive data in attributes**  
It is recommended that you conditionally render sensitive `data-directus` attributes only when your webpage renders within the Directus Visual Editor in order to avoid leaking this data publicly. <br><br> There are a number of ways to achieve this. For example you might develop your website to only render sensitive attributes in the presence of a certain query string included in your Visual Editor URL settings, for example `?visual-editing=true&token=123`.
::

## Connecting to Directus

Once all your `data-directus` attributes have been configured, it is required to call the `apply()` method somewhere on the page. This method will establish the connection to Directus and make your editable elements interactive within the Visual Editor Module. This must be done only after all the relevant elements on the page have fully mounted or rendered with their generated attributes.

```js
apply({ directusUrl: 'http://localhost:8000' });
```

| Option | Type | Description |
| ------ | ---- | ----------- |
| `directusUrl` | `string`                           | URL of your Directus instance. This is required. |
| `elements`    | `HTMLElement`, `HTMLElement[]`     | Could have one or more elements. If the elements themselves don’t contain a data-directus attribute, their children will be selected. Optional, otherwise will be applied to all elements on page. |
| `customClass` | `string[]`                         | Adds a class to Overlay Elements to enable custom styles. Optional.|
| `onSaved`     | `(data) => void`                   | Callback function called after the fields are saved in Directus. Optional, otherwise current page will be reloaded using `window.location.reload()`. |

The `apply()` method also returns the `remove`, `enable` and `disable` methods. These can then be used on the selected elements in question. Make sure to await them.

```js
const { disable, enable, remove } = await apply({ directusUrl });
```

The optional `onSaved` callback function of the `apply()` method has a number of parameters which may be useful.

| Parameter | Type | Description |
| --------- | ---- | ----------- |
| `collection` | `string`              | Name of the relevant collection. |
| `item` | `string`, `number` | Primary key of the item. |
| `payload` | `Record<string, any>` | The changed values. |

::callout{icon="material-symbols:warning-rounded" color="amber"}
Before leaving the page on client-side navigation, be sure to call the `remove()` method!
::

::callout{icon="material-symbols:warning-rounded" color="amber"}
**Content Security Policy**  
If you have CSP configured, be sure to make your site available for use inside an iframe in Directus. If you're unsure where your CSP is defined, check your web server configuration files, your site’s build configuration, or your hosting platform’s security settings.
::

## Usage in Non-JS Environments

As this library is built as a Node package, environments that can't take advantage of NPM will need to take a slightly different approach to including the functionality in their websites.

The compiled code for the package can be found [in the repository](https://github.com/directus/visual-editing/blob/c634a3fe4f9dde298d3ae13d3e7680b59c61ef99/dist/visual-editing.js). 

This can then be included in your website like so:

```js
<script src="path-to/visual-editing.js" type="text/javascript"></script>
```

```js
<script type="text/javascript">
	document.addEventListener('DOMContentLoaded', function () {
		DirectusVisualEditing.apply({ directusUrl: 'http://localhost:8000' });
	});
</script>
```
