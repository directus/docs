---
title: Migrate from Directus Cloud
description: Learn how to migrate your Cloud project to a self-hosting provider.
navigation: false
---

Self-hosting Directus means running the Directus software on your own infrastructure, giving you full control over your data, hardware, and deployment configuration. While Directus offers both cloud-hosted and self-hosted options, this section of the documentation focuses on migrating a cloud-hosted project to self-hosting.

Our official Directus CMS template is now live on [Railway](https://railway.com/deploy/directus-cms). With one click, you can spin up a full Directus project on a lightweight, cost-efficient platform.

## Database Migration

### Prerequisites

- Directus 11.12.0
- Postgres 13.8
- psql command (should be included with Postgres)

### Restore the database

With Postgres server running, restore the SQL file into database. We recommend to restore to `directus` database. To do so, first create the database if does not exist yet:

```sh
$ psql -h localhost -p 5100 -U postgres -d postgres -c "CREATE DATABASE \"directus\""
```

If you need to use maps on your Directus project, be sure to also install `postgis`:

```sh
$ psql -h localhost -p 5100 -U postgres -d directus -c "CREATE EXTENSION \"postgis\""
```

Now you can restore your project to database:

```sh
$ psql -h localhost -p 5100 -U postgres directus < example.sql
```

### Set files to local provider

On database, files are configured to use `cloud` provider but your Directus installation will not have this configuration. In order to have them configured locally, you just need to run the following SQL script:

```sh
$ psql -h localhost -p 5100 -U postgres directus -c "UPDATE \"directus_files\" SET \"storage\" = 'local'"
```

### Run Directus

Finally you just need to run Directus. Be sure DB_USER configuration is the same as the one who restored database, in this case `postgres`:

```env
DB_PORT=5100
DB_POOL_MAX=4
DB_HOST=localhost
DB_CLIENT=postgres
DB_DATABASE=directus
DB_USER=postgres
DB_PASSWORD=postgres
```

## Files Migrations

Multiple files can be uploaded simultaneously via both the App studio and via the API engine. File uploads are not limited to just images, they can be any kind of file.

### App Studio

![The files module with a number of files visible in a gallery layout.](/img/796eb265-bce2-4faa-93d0-118dac406457.webp)

By opening the files module on the left, you will see your file library, which acts as one big folder to store all uploaded files and sub-folders.

Create a folder called `Images` and click on :icon{name="material-symbols:add-circle-outline-rounded"}.

![The popup that appears when clicking on the upload button.](/img/ec81bb5c-6dbf-4518-8684-0e5df99de013.webp)

You'll see a popup with options for uploading your file:

- Dragging a file from your desktop.
- Clicking on the popup area to select a file from your machine.
- Clicking on the menu in the popup and selecting "**Import from URL**"

Optionally, you can also click the file display to open the file details page and fill in information as desired.

### API Engine

::code-group
```http [REST]
// POST /files

Body must be formatted as a `multipart/form-data` with a final property called `file`.
```

```graphql [GraphQL]
# Not supported by GraphQL
```

```js [SDK]
import { createDirectus, rest, uploadFiles } from '@directus/sdk';

const directus = createDirectus('https://directus.example.com').with(rest());

const formData = new FormData();
formData.append('file_1_property', 'Value');
formData.append('file', raw_file);
formData.append('file_2_property', 'Value');
formData.append('file', raw_file_2);

const result = await directus.request(uploadFiles(formData));
```

::

The file contents has to be provided in a property called `file`. All other properties of
the file object can be provided as well, except `filename_disk` and `filename_download`.
